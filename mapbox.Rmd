---
title: "Mapbox.js"
output: 
  html_document:
    toc: true
    toc_depth: 2
    toc_float: true
    theme: flatly
---

$~$

# Basics of Mapbox.js

Similarly to Leaflet.js, Mapbox.js is also an open-source JavaScript library that allows you to create interactive maps which then can be added to your website. 

You can access the Mapbox .js script [here](https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.js) and the .css script [here](https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.css)

$~$


**Just like on the Leaflet.js page, in the examples below both text editor and jsFiddle codes are displayed.**


$~$

# View and basemap

Here is the basic HTML code for the web map, and you can set the view and the [basemap](https://www.mapbox.com/maps/) using the code `var map = L.mapbox.map('map', 'mapbox.streets').setView([20, -15], 3);`.

    <html>

      <head>

        <script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
        
        <link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet'/>

        <style>
        
          body { margin:0; padding:0; }
          #map { position:absolute; top:0; bottom:0; width:100%; }
          
        </style>

      </head>

      <body>

        <div id='map'></div>

        <script>

          L.mapbox.accessToken ='pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.streets').setView([20, -15], 3);

        </script>

      </body>

    </html>

<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/2/embed/js,html,css,result/dark/"></script>

$~$

# Marker

You can add a marker to the map using the code `var marker = L.marker([]); marker.addTo(map);`. This will add the same type of marker as in Leaflet.js. 

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.light').setView([11, 142], 3);

          var marker = L.marker([11.3499986, 142.1999992]);
          marker.addTo(map);

          </script>
    
<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/3/embed/js,html,css,result/dark/"></script>

$~$

## Mapbox marker

You can also use the Mapbox marker `icon: L.mapbox.marker.icon`. 

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.light').setView([11, 142], 3);

          L.marker([11.3499986, 142.1999992], {
            icon: L.mapbox.marker.icon({
            'marker-size': 'large',
            'marker-color': '#e12323'})
            }).addTo(map);

          </script>

<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/4/embed/js,html,css,result/dark/"></script>

$~$

## Pop-up marker

Pop-up can also be addded.

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.light').setView([11, 142], 3);

          var marker = L.marker([11.3499986, 142.1999992])

          marker.bindPopup('Mariana Trench').openPopup();

          marker.addTo(map);

          </script>

<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/5/embed/js,html,css,result/dark/"></script>

$~$

## Circle marker

Changing the default marker to circle. 

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.light').setView([11, 142], 3);

          var circle = L.circle([11.3499986, 142.1999992], 100000, {
          color: '#a58fa4',
          fillColor: '#0d11ee',
          fillOpacity: 0.5}).addTo(map);

          map.addLayer(circle);
          
          </script>
          
<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/6/embed/js,html,css,result/dark/"></script>

$~$

## Costum marker

Adding costum maker. 

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.light').setView([11, 142], 3);

          var customIcon = L.icon({
          iconUrl: 'https://image.flaticon.com/icons/png/512/190/190006.png',
          iconSize: [100, 95]});

          var marker = L.marker([11.3499986, 142.1999992], {icon: customIcon})

          marker.addTo(map);

          </script>

<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/7/embed/js,html,css,result/dark/"></script>

$~$

# Polyline

For adding a line, the same code can be used as in Leaflet.js. 

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.light').setView([0, 0], 3);

          var line = L.polyline([[0, -180], [0, 180]],{color: 'red'}).addTo(map);

          </script>

<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/8/embed/js,html,css,result/dark/"></script>

$~$

# Polygon

Again, the same code can be used. 

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.light').setView([0, 0], 3);

          var polygon = L.polygon([[23.5, 180], [-23.5, 180], [-23.5, -180], [23.5, -180]],
          {color: 'orange', fillColor: 'orange', fillOpacity: .5}).addTo(map);

          map.addLayer(polygon);

          </script>

<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/9/embed/js,html,css,result/dark/"></script>

$~$

# Layer control

For the layer control option the same example is used as for the leaflet.js map. 

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map').setView([0, 0], 3);

          var Hydda_Full = L.tileLayer('https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png', {maxZoom: 18, attribution: 'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
          }).addTo(map);

          var CartoDB_DarkMatter = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
          subdomains: 'abcd',
          maxZoom: 19
          }).addTo(map);

          L.control.layers({
          'Hydda': Hydda_Full,
          'Carto': CartoDB_DarkMatter
          }).addTo(map);

          </script>
          
<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/10/embed/js,html,css,result/dark/"></script>

$~$

## Layer control with icon

          <script>
          
          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var dolphinIcon = L.icon({
          iconUrl: 'https://image.flaticon.com/icons/svg/47/47327.svg',
          iconSize: [32, 37]
          });

          var sealIcon = L.icon({
          iconUrl: 'https://d30y9cdsu7xlg0.cloudfront.net/png/56283-200.png',
          iconSize: [32, 37]
          });

          var dolphinLayer = L.marker([51.4709, -0.221], {
          icon: dolphinIcon
          });

          var sealLayer = L.marker([51.4701, -0.1801], {
          icon: sealIcon
          });

          var map = L.map('map', {
          center: [51.47, -0.20],
          zoom: 13,
          layers: [dolphinLayer, sealLayer]
          });

          var overlayMaps = {
          "<img src='https://image.flaticon.com/icons/svg/47/47327.svg' height=21>Dolphin": dolphinLayer,
          "<img src='https://d30y9cdsu7xlg0.cloudfront.net/png/56283-200.png' height=21>Seal": sealLayer
          };

          L.control.layers(null, overlayMaps, {
          collapsed: false
          }).addTo(map);

          var CartoDB_Positron = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
          subdomains: 'abcd',
          maxZoom: 19
          }).addTo(map);
          
          </script>

<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/18/embed/js,html,css,result/dark/"></script>

$~$

# WMS tile

The same code can be applied for the WMS tile. 

          <script>
          
          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.satellite').setView([51, 1], 3);

          L.tileLayer.wms("http://213.122.160.75/scripts/mapserv.exe?map=D:/Websites/MeshAtlantic/map/MESHAtlantic.map", {
          layers: 'EUSMMSFD',
          format: 'image/png',
          transparent: true,
          attribution: '&copy; <a href="http://www.emodnet.eu/">EUSeaMap2 2016 Broad-Scale Predictive Habitat Map</a>'
          }).addTo(map);
          
          </script>
          
<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/11/embed/js,html,css,result/dark/"></script

$~$

# Coordinate information

          <script>

          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map').setView([0, 0], 3);

          var CartoDB_DarkMatter = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
          subdomains: 'abcd',
          maxZoom: 19
          }).addTo(map);

          var popup = L.popup();

          function onMapClick(e) {
          popup
          .setLatLng(e.latlng)
          .setContent(e.latlng.toString())
          .openOn(map);
          }

          map.on('click', onMapClick);

<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/20/embed/js,html,css,result/dark/"></script>

$~$

# Adding geotagged pictures to a map

          <script>

          var map = L.map('map', {
          center: [20, -15],
          zoom: 2
          });

          var CartoDB_DarkMatter = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
          subdomains: 'abcd',
          maxZoom: 19
          }).addTo(map);

          var customPopup = "Oarai beach<br/><img src='https://c1.staticflickr.com/5/4435/36028473794_62c4e88482_b.jpg' width='300px'/>";
          var marker = L.marker([36.29, 140.56]).
          bindPopup(customPopup).addTo(map);

          var customPopup = "Santa Monica<br/><img src='https://c1.staticflickr.com/5/4364/36053908023_67500b4bd6_b.jpg' width='300px'/>";
          var marker = L.marker([34.00, -118.49]).
          bindPopup(customPopup).addTo(map);  

          var customPopup = "Bondi beach<br/><img src='https://c1.staticflickr.com/5/4440/36862734845_8c485429e7_b.jpg' width='300px'/>";
          var marker = L.marker([-33.89, 151.28]).
          bindPopup(customPopup).addTo(map);

          var customPopup = "West Wittering<br/><img src='https://c1.staticflickr.com/5/4391/36054414233_b3f762af22_b.jpg' width='300px'/>";
          var marker = L.marker([50.76, -0.90]).
          bindPopup(customPopup).addTo(map);

          </script>
          
<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/28/embed/js,html,css,result/dark/"></script>


# Adding a marker

          <script>
          
          L.mapbox.accessToken = 'pk.eyJ1Ijoid2FuZGFib2RuYXIiLCJhIjoiY2phdHM1dm0xNXF0ajJxanU3dmdmaHRqcCJ9.mFPox1jAE9LkZN6v5OZ7Lw';

          var map = L.mapbox.map('map', 'mapbox.light').setView([0, 0], 3);

          L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
          }).addTo(map);

          newMarkerGroup = new L.LayerGroup();
          map.on('click', function(e){var newMarker = new L.marker(e.latlng, 
          {icon: L.mapbox.marker.icon({
            'marker-size': 'large',
            'marker-color': '#e12323'})}).addTo(map);});

    
          </script>
          
<script async src="https://jsfiddle.net/WandaBodnar/jga1e38m/41/embed/js,html,css,result/dark/"></script>

$~$

<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>